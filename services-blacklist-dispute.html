<!DOCTYPE html>
<html lang="th">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏î‡∏≥ - RENEKANKHA</title>
	<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üîê</text></svg>">
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
	
	<style>
		:root {
			/* Professional Color Palette */
			--primary: #2563eb;
			--primary-light: #3b82f6;
			--primary-dark: #1d4ed8;
			--secondary: #64748b;
			--accent: #06b6d4;
			--success: #10b981;
			--warning: #f59e0b;
			--error: #ef4444;
			--info: #3b82f6;
			
			/* Background & Surface */
			--bg-primary: #ffffff;
			--bg-secondary: #f8fafc;
			--bg-tertiary: #f1f5f9;
			--surface: #ffffff;
			--surface-hover: #f8fafc;
			
			/* Text Colors */
			--text-primary: #0f172a;
			--text-secondary: #475569;
			--text-tertiary: #64748b;
			--text-muted: #94a3b8;
			
			/* Borders */
			--border-primary: #e2e8f0;
			--border-secondary: #f1f5f9;
			--border-accent: #3b82f6;
			
			/* Shadows */
			--shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
			--shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
			--shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
			--shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
		}

		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
			background: var(--bg-primary);
			color: var(--text-primary);
			line-height: 1.6;
			font-size: 16px;
		}

		/* Navigation */
		.nav {
			background: var(--surface);
			border-bottom: 1px solid var(--border-primary);
			padding: 1rem 0;
			position: sticky;
			top: 0;
			z-index: 100;
		}

		.nav-container {
			max-width: 1200px;
			margin: 0 auto;
			padding: 0 2rem;
			display: flex;
			justify-content: space-between;
			align-items: center;
		}

		.nav-brand {
			display: flex;
			align-items: center;
			gap: 0.75rem;
			text-decoration: none;
			color: var(--text-primary);
			font-weight: 700;
			font-size: 1.25rem;
		}

		.nav-brand-icon {
			font-size: 1.5rem;
		}

		.nav-links {
			display: flex;
			gap: 2rem;
			align-items: center;
		}

		.nav-link {
			color: var(--text-secondary);
			text-decoration: none;
			font-weight: 500;
			padding: 0.5rem 1rem;
			border-radius: 0.5rem;
			transition: all 0.2s ease;
		}

		.nav-link:hover,
		.nav-link.active {
			color: var(--primary);
			background: var(--surface-hover);
		}

		/* Main Content */
		.main-content {
			max-width: 800px;
			margin: 0 auto;
			padding: 4rem 2rem;
		}

		.page-header {
			text-align: center;
			margin-bottom: 3rem;
		}

		.page-title {
			font-size: 2.5rem;
			font-weight: 700;
			color: var(--text-primary);
			margin-bottom: 1rem;
			letter-spacing: -0.02em;
		}

		.page-subtitle {
			font-size: 1.1rem;
			color: var(--text-tertiary);
			max-width: 500px;
			margin: 0 auto;
			line-height: 1.5;
		}

		/* Form Card */
		.form-card {
			background: var(--surface);
			border: 1px solid var(--border-primary);
			border-radius: 1rem;
			padding: 2rem;
			box-shadow: var(--shadow-sm);
		}

		.form-group {
			margin-bottom: 1.5rem;
		}

		.form-label {
			display: block;
			font-weight: 600;
			color: var(--text-primary);
			margin-bottom: 0.5rem;
			font-size: 0.9rem;
		}

		.form-input,
		.form-textarea {
			width: 100%;
			padding: 0.75rem 1rem;
			border: 1px solid var(--border-primary);
			border-radius: 0.5rem;
			font-size: 1rem;
			color: var(--text-primary);
			background: var(--bg-primary);
			transition: all 0.2s ease;
		}

		.form-input:focus,
		.form-textarea:focus {
			outline: none;
			border-color: var(--primary);
			box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
		}

		.form-textarea {
			resize: vertical;
			min-height: 120px;
		}

		.form-help {
			font-size: 0.8rem;
			color: var(--text-muted);
			margin-top: 0.25rem;
		}

		/* Submit Button */
		.btn-submit {
			width: 100%;
			padding: 0.875rem 1.5rem;
			background: var(--primary);
			color: white;
			border: none;
			border-radius: 0.5rem;
			font-weight: 600;
			font-size: 1rem;
			cursor: pointer;
			transition: all 0.2s ease;
		}

		.btn-submit:hover {
			background: var(--primary-dark);
			transform: translateY(-1px);
		}

		.btn-submit:disabled {
			background: var(--text-muted);
			cursor: not-allowed;
			transform: none;
		}

		/* Status Messages */
		.status {
			margin-top: 1rem;
			padding: 0.75rem 1rem;
			border-radius: 0.5rem;
			font-weight: 500;
			text-align: center;
		}

		.status.loading {
			background: rgba(59, 130, 246, 0.1);
			color: var(--info);
			border: 1px solid rgba(59, 130, 246, 0.2);
		}

		.status.success {
			background: rgba(16, 185, 129, 0.1);
			color: var(--success);
			border: 1px solid rgba(16, 185, 129, 0.2);
		}

		.status.error {
			background: rgba(239, 68, 68, 0.1);
			color: var(--error);
			border: 1px solid rgba(239, 68, 68, 0.2);
		}

		/* Back Button */
		.back-btn {
			display: inline-flex;
			align-items: center;
			gap: 0.5rem;
			color: var(--text-primary);
			text-decoration: none;
			font-weight: 600;
			margin-bottom: 2rem;
			padding: 0.75rem 1.5rem;
			background: var(--primary);
			color: white;
			border-radius: 0.5rem;
			transition: all 0.2s ease;
			box-shadow: var(--shadow-sm);
		}

		.back-btn:hover {
			background: var(--primary-dark);
			transform: translateY(-2px);
			box-shadow: var(--shadow-md);
			color: white;
		}

		/* Responsive Design */
		@media (max-width: 768px) {
			.nav-container {
				padding: 0 1rem;
			}

			.nav-links {
				gap: 1rem;
			}

			.main-content {
				padding: 2rem 1rem;
			}

			.page-title {
				font-size: 2rem;
			}

			.form-card {
				padding: 1.5rem;
			}
		}
	</style>
</head>
<body>
	<!-- Navigation -->
	<nav class="nav">
		<div class="nav-container">
			<a href="index.html" class="nav-brand">
				<div class="nav-brand-icon">üîê</div>
				<span>RENEKANKHA</span>
			</a>
			<div class="nav-links">
				<a href="index.html" class="nav-link">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a>
				<a href="authenticator.html" class="nav-link">2FA Authenticator</a>
				<a href="reports.html" class="nav-link">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</a>
				<a href="services.html" class="nav-link">‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</a>
				<a href="orders.html" class="nav-link">‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</a>
				<!-- Login/Logout button will be added here by JavaScript -->
			</div>
		</div>
	</nav>

	<!-- Main Content -->
	<main class="main-content">
		<a href="services.html" class="back-btn">
			‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£
		</a>

		<div class="page-header">
			<h1 class="page-title">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏î‡∏≥</h1>
			<p class="page-subtitle">‡∏¢‡∏∑‡πà‡∏ô‡∏Ñ‡∏≥‡∏£‡πâ‡∏≠‡∏á‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Å‡∏£‡∏ì‡∏µ‡∏ñ‡∏π‡∏Å‡πÉ‡∏™‡πà‡∏£‡πâ‡∏≤‡∏¢‡πÉ‡∏ô Blacklistseller</p>
		</div>

		<div class="form-card">
			<form id="disputeForm">
				<div class="form-group">
					<label for="platformUrl" class="form-label">‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡πÅ‡∏à‡πâ‡∏á‡πÉ‡∏ô Blacklistseller</label>
					<input type="url" id="platformUrl" class="form-input" placeholder="https://blacklistseller.com/..." required>
					<div class="form-help">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡πÅ‡∏à‡πâ‡∏á‡πÉ‡∏ô Blacklistseller</div>
				</div>

				<div class="form-group">
					<label for="contact" class="form-label">‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠</label>
					<input type="text" id="contact" class="form-input" placeholder="Line ID, Email ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå" required>
					<div class="form-help">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ</div>
				</div>

				<div class="form-group">
					<label for="statement" class="form-label">‡∏Ñ‡∏≥‡∏ä‡∏µ‡πâ‡πÅ‡∏à‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•</label>
					<textarea id="statement" class="form-textarea" placeholder="‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÅ‡∏à‡πâ‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÑ‡∏ó‡∏°‡πå‡πÑ‡∏•‡∏ô‡πå‡πÇ‡∏î‡∏¢‡∏¢‡πà‡∏≠..." required></textarea>
					<div class="form-help">‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÅ‡∏•‡∏∞‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô</div>
				</div>

				<div class="form-group">
					<label for="evidence" class="form-label">‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö (‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)</label>
					<textarea id="evidence" class="form-textarea" placeholder="‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö ‡πÄ‡∏ä‡πà‡∏ô ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û, ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£, ‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏≠‡∏∑‡πà‡∏ô‡πÜ (‡∏Ñ‡∏±‡πà‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÉ‡∏´‡∏°‡πà)"></textarea>
					<div class="form-help">‡∏Å‡∏£‡∏≠‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÅ‡∏¢‡∏Å‡∏Å‡∏±‡∏ô</div>
				</div>

				<button type="submit" class="btn-submit" id="submitBtn">
					‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
				</button>

				<div id="status" class="status" style="display: none;"></div>
			</form>
	</div>
	</main>

	<script>
		// Form Elements
		const form = document.getElementById('disputeForm');
		const submitBtn = document.getElementById('submitBtn');
		const statusDiv = document.getElementById('status');

		// Status Messages
		function setStatus(message, type = 'success') {
			statusDiv.textContent = message;
			statusDiv.className = `status ${type}`;
			statusDiv.style.display = 'block';
		}

		// Parse Evidence URLs
		function parseEvidence() {
			const evidenceText = document.getElementById('evidence').value.trim();
			if (!evidenceText) return [];
			
			return evidenceText
				.split(/\n+/)
				.map(url => url.trim())
				.filter(url => url.length > 0)
				.slice(0, 10); // Limit to 10 URLs
		}

		// Form Submission
		async function submitForm(event) {
			event.preventDefault();
			
			// Get form data
			const platformUrl = document.getElementById('platformUrl').value.trim();
			const contact = document.getElementById('contact').value.trim();
			const statement = document.getElementById('statement').value.trim();
			const evidenceUrls = parseEvidence();

			// Validate required fields
			if (!platformUrl || !contact || !statement) {
				setStatus('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô', 'error');
				return;
			}

			// Show loading state
			submitBtn.disabled = true;
			submitBtn.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠...';
			setStatus('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà...', 'loading');

			try {
				const payload = {
					platformUrl,
					contact,
					statement,
					evidenceUrls
				};

				const response = await fetch('/api/services/blacklist-dispute', {
					method: 'POST',
					headers: {
						'Content-Type': 'application/json'
					},
					body: JSON.stringify(payload)
				});

				if (!response.ok) {
					throw new Error('Failed to submit request');
				}

				const result = await response.json();
				
				// Success
				setStatus(`‚úÖ ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡πÄ‡∏Ñ‡∏™: ${result.ticket?.id || 'N/A'}`, 'success');
				
				// Reset form
				form.reset();
				
			} catch (error) {
				console.error('Submission error:', error);
				setStatus('‚ùå ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á', 'error');
			} finally {
				// Reset button state
				submitBtn.disabled = false;
				submitBtn.textContent = '‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç';
			}
		}

		// Event Listeners
		form.addEventListener('submit', submitForm);

		// Check user status and update navigation
		async function checkUserStatus() {
			try {
				const res = await fetch('/api/auth/me', { credentials: 'include' });
				const data = await res.json();
				
				const navLinks = document.querySelector('.nav-links');
				if (navLinks) {
					if (data.ok && data.user) {
						// User is logged in - show logout button
						const existingLoginBtn = navLinks.querySelector('a[href="login.html"]');
						if (existingLoginBtn) {
							existingLoginBtn.remove();
						}
						
						const existingLogoutBtn = navLinks.querySelector('.logout-btn');
						if (existingLogoutBtn) {
							existingLogoutBtn.remove();
						}
						
						const logoutBtn = document.createElement('a');
						logoutBtn.href = '#';
						logoutBtn.className = 'nav-link logout-btn';
						logoutBtn.innerHTML = `üë§ ${data.user.name || '‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ'} (‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö)`;
						logoutBtn.addEventListener('click', (e) => {
							e.preventDefault();
							logout();
						});
						
						navLinks.appendChild(logoutBtn);
					} else {
						// User is not logged in - show login button
						const existingLogoutBtn = navLinks.querySelector('.logout-btn');
						if (existingLogoutBtn) {
							existingLogoutBtn.remove();
						}
						
						const existingLoginBtn = navLinks.querySelector('a[href="login.html"]');
						if (!existingLoginBtn) {
							const loginBtn = document.createElement('a');
							loginBtn.href = 'login.html';
							loginBtn.className = 'nav-link';
							loginBtn.textContent = 'üë§ ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö';
							
							navLinks.appendChild(loginBtn);
						}
					}
				}
			} catch (error) {
				console.error('Error checking user status:', error);
			}
		}

		// Logout function
		async function logout() {
			try {
				const res = await fetch('/api/auth/logout', {
					method: 'POST',
					credentials: 'include'
				});
				
				if (res.ok) {
					setStatus('‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'success');
					setTimeout(() => {
						location.reload();
					}, 1500);
				} else {
					setStatus('‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'error');
				}
			} catch (error) {
				console.error('Logout error:', error);
				setStatus('‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'error');
			}
		}

		// Initialize
		document.addEventListener('DOMContentLoaded', () => {
			checkUserStatus();
		});
	</script>
  <!-- Chat Support Widget -->
  <script src="/chat-support.js"></script>
</body>
</html>
